<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>13.2</title>
</head>

<body>
    <script>
        // Задание 1
        fetch('https://jsonplaceholder.typicode.com/posts/1')
            .then(response => response.json())  // Преобразуем ответ в JSON
            .then(data => {
                console.log('Задание 1: Заголовок:', data.title);
                console.log('Задание 1: Тело поста:', data.body);
            })    // Работаем с полученными данными
            .catch(error => console.error('Ошибка:', error));  // Обрабатываем ошибку
    

        // Задание 2
        const data = { title: "Новый пост", body: "Содержимое поста", userId: 1 }
        fetch('https://jsonplaceholder.typicode.com/posts', {
            method:'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        })
        .then(response => response.json())
        .then(data => console.log('Задание 2: Успешное создание поста: ', data))
        .catch(error => console.log('Ошибка: ', error))

        // Задание 3
        fetch('https://jsonplaceholder.typicode.com')
        .then(response => response.json())
        .then(data => console.log('Задание 3: Заголовок: ', data.title))
        .catch(error => console.log('Задание 3: Ошибка: ', error))

        // Задание 4: PUT
        fetch('https://jsonplaceholder.typicode.com/posts/1', {
            method: 'PUT',
            body: JSON.stringify({
                id: 1,
                title: 'Что-то новенькое',
                body: 'Подробнее об этом',
                userId: 1,
            }),
            headers: {
                'Content-type': 'application/json; charset=UTF-8',
            },
        })
        .then(response => response.json())
        .then(data => console.log('Задание 4: Успех: ', data))
        .catch(error => console.log('Задание 4: Ошибка: ', error))

        // Задание 4: DELETE
        fetch('https://jsonplaceholder.typicode.com/posts/1', {
            method: 'DELETE',
        })
        .then(response => response.json())
        .then(data => console.log('Задание 4: Удаление успешно: ', data))
        .catch(error => console.log('Задание 4: Ошибка удаления: ', error))

        // Задание 5
        async function fetchPOST() {
            try {
                const response = await fetch('https://jsonplaceholder.typicode.com/posts', {
                    method: 'POST',
                    headers: {
                        'Content-type': 'application/json',
                    },
                    body: JSON.stringify({ title: "Новый пост", body: "Содержимое поста", userId: 1 })
                });
                const data = await response.json();
                console.log('Задание 5: Успех: ', data.email);
            } catch (error) {
                console.log('Задание 5: Ошибка: ', error)
            }
        }
        fetchPOST();

        // Задание 6
        fetch('https://jsonplaceholder.typicode.com/comments', {
            method: 'GET',
            headers: {
                'Authorization': 'Bearer test-token',
                'User-agent': 'studyPurposeApp'
            }
        })
        .then(response => response.json())
        .then(data => console.log('Задание 6: Успех: ', data))
        .catch(error => console.log('Задание 6: Ошибка: ', error))
    </script>
</body>

</html>